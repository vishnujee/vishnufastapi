<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Social Media Meta Tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ¤– Vishnu ka AGENTIC AIðŸš€</title>
    <meta property="og:site_name" content="Vishnu's AI Chatbot">
    <meta property="og:description" content="An AI-powered chatbot for seamless conversation and knowledge retrieval.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://mygenfile25.s3.ap-south-1.amazonaws.com/vishnu.jpg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="Vishnu's AI Chatbot">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@AAPKAVISHNU">
    <meta name="twitter:creator" content="@AAPKAVISHNU">
    <meta name="twitter:title" content="Chat with Vishnu's AI Assistant">
    <meta name="twitter:description"
        content="An AI-powered chatbot that assists with intelligent responses and real-time document retrieval.">
    <meta name="twitter:image" content="https://mygenfile25.s3.ap-south-1.amazonaws.com/vishnu.jpg">

    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>


    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="static/styles.css" />
    <script src="static/script.js"></script>
</head>

<body class="bg-gray-50 min-h-screen">
    <!-- Navigation Bar -->
    <nav class="bg-white shadow-lg sticky top-0 z-10">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-4">
                    <a href="/" class="text-2xl font-bold text-blue-600 hover:text-green-600">
                        Vishnu Tools
                    </a>
                </div>

                <div class="hidden md:flex items-center space-x-8">
                    <a href="#chat" class="nav-link text-xl text-gray-700 hover:text-green-600"
                        onclick="showTool('chat-section')">AI Chat</a>
                    <div class="dropdown relative">
                        <button class="nav-link text-xl text-gray-700 hover:text-green-600 flex items-center">
                            PDF Tools <i class="fas fa-chevron-down ml-1 text-xs"></i>
                        </button>
                        <div class="dropdown-content bg-white shadow-lg rounded-md mt-2 py-2 w-48">
                            <a href="#merge" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('merge-section')">Merge PDFs</a>
                            <a href="#compress" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('compress-section')">Compress PDF</a>
                            <a href="#encrypt" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('encrypt-section')">Encrypt PDF</a>
                            <a href="#pdf-to-images" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('pdfToImages-section')">PDF to Images</a>
                            <a href="#split" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('split-section')">Split PDF</a>
                            <a href="#delete-pages" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('deletePages-section')">Delete Pages</a>
                            <a href="#pdf-to-word" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('pdfToWord-section')">PDF to Word</a>
                            <a href="#pdf-to-excel" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('pdfToExcel-section')">PDF to Excel</a>
                            <a href="#image-to-pdf" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('imageToPdf-section')">Image to PDF</a>
                            <a href="#remove-password" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('removePassword-section')">Remove Password</a>
                            <a href="#reorder" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('reorder-section')">Reorder Pages</a>
                            <a href="#pageNumbers" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('pageNumbers-section')">Add Page Numbers</a>
                            <a href="#signature" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('signature-section')">Add Signature</a>
                            <a href="#remove-background" class="block px-4 py-2 text-gray-700 hover:bg-gray-100"
                                onclick="showTool('removeBackground-section')">Remove Background</a>
                        </div>
                    </div>
                    <a href="#videos" class="nav-link text-xl text-gray-700 hover:text-green-600"
                        onclick="showTool('videos-section')">Videos</a>
                </div>
                <button class="md:hidden text-gray-700" id="mobile-menu-button">
                    <i class="fas fa-bars text-xl"></i>
                </button>
            </div>

            <!-- Mobile menu -->
            <div class="md:hidden hidden bg-white py-2 px-4" id="mobile-menu">
                <a href="#chat" class="block py-2 text-gray-700 hover:text-green-600"
                    onclick="showTool('chat-section')">AI Chat</a>
                <div class="py-2">
                    <button class="flex items-center justify-between w-full text-gray-700 hover:text-green-600"
                        onclick="toggleMobileSubmenu()">
                        PDF Tools <i class="fas fa-chevron-down ml-1 text-xs"></i>
                    </button>
                    <div class="hidden bg-gray-50 pl-4 mt-1" id="mobile-submenu">
                        <a href="#merge" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('merge-section')">Merge PDFs</a>
                        <a href="#compress" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('compress-section')">Compress PDF</a>
                        <a href="#encrypt" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('encrypt-section')">Encrypt PDF</a>
                        <a href="#pdf-to-images" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('pdfToImages-section')">PDF to Images</a>
                        <a href="#split" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('split-section')">Split PDF</a>
                        <a href="#delete-pages" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('deletePages-section')">Delete Pages</a>
                        <a href="#pdf-to-word" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('pdfToWord-section')">PDF to Word</a>
                        <a href="#pdf-to-excel" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('pdfToExcel-section')">PDF to Excel</a>
                        <a href="#image-to-pdf" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('imageToPdf-section')">Image to PDF</a>
                        <a href="#remove-password" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('removePassword-section')">Remove Password</a>
                        <a href="#reorder" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('reorder-section')">Reorder Pages</a>
                        <a href="#pageNumbers" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('pageNumbers-section')">Add Page Numbers</a>
                        <a href="#signature" class="block py-2 text-gray-7
                        00 hover:text-green-600" onclick="showTool('signature-section')">Add Signature</a>
                        <a href="#remove-background" class="block py-2 text-gray-700 hover:text-green-600"
                            onclick="showTool('removeBackground-section')">Remove Background</a>
                    </div>
                </div>
                <a href="#videos" class="block py-2 text-gray-700 hover:text-green-600"
                    onclick="showTool('videos-section')">Videos</a>
            </div>
        </div>
    </nav>


    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Hero Section -->
        <div class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-800 mb-4">Vishnu AI & PDF Tools</h1>
            <p class="text-xl text-gray-600 max-w-3xl mx-auto">Your all-in-one solution for PDF operations and
                AI-powered assistance</p>
        </div>
        <h1>System Memory Usage</h1>
        <div class="memory-container">
            <div class="memory-card">
                <h2>RAM Usage</h2>
                <div class="progress-container">
                    <div class="progress-bar" id="ram-bar"></div>
                </div>
                <div class="memory-stats" id="ram-stats"></div>
            </div>
            <div class="memory-card">
                <h2>ROM (Swap) Usage</h2>
                <div class="progress-container">
                    <div class="progress-bar" id="rom-bar"></div>
                </div>
                <div class="memory-stats" id="rom-stats"></div>
            </div>
        </div>
        <!-- Chat Section -->
        <div id="chat-section" class="tool-section mb-12">
            <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                <div class="flex items-center mb-4">
                    <div class="bg-green-100 p-2 rounded-full mr-3">
                        <i class="fas fa-robot text-green-600 text-xl"></i>
                    </div>
                    <h2 class="text-2xl font-semibold text-gray-800">Vishnu AI Assistant</h2>
                </div>
                <div class="space-y-4">
                    <div class="flex space-x-2">
                        <input type="text" id="chatInput" placeholder="Ask me anything about Vishnu..." maxlength="250"
                            class="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                        <button onclick="sendChat()"
                            class="bg-green-600 text-white p-3 rounded-lg hover:bg-green-700 transition-colors flex items-center">
                            <i class="fas fa-paper-plane mr-2"></i> Send
                        </button>
                    </div>
                    <div id="chatOutput" class="text-gray-700 bg-gray-50 p-4 rounded-lg min-h-32"></div>
                    <div class="progress" id="progress-chat">
                        <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                        <div class="progress-text" id="progress-text-chat"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- PDF Tools Sections -->
        <div class="grid grid-cols-1 gap-8">
            <!-- Merge PDFs -->
            <!-- Merge PDFs -->
            <div id="merge-section" class="tool-section">
                <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                    <div class="flex items-center mb-4">
                        <div class="bg-blue-100 p-2 rounded-full mr-3">
                            <i class="fas fa-object-group text-blue-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Merge PDFs</h2>
                    </div>
                    <form id="mergeForm" class="space-y-4">
                        <div>
                            <label for="merge-files" class="block text-sm font-medium text-gray-600 mb-1">Select PDF
                                Files</label>
                            <div class="flex items-center">
                                <label
                                    class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                    <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose Files
                                    <input type="file" id="merge-files" name="files" multiple accept=".pdf" required
                                        class="hidden">
                                </label>
                                <span id="merge-files-count" class="ml-3 text-sm text-gray-500">No files selected</span>
                            </div>
                        </div>
                        <div id="file-previews" class="hidden">
                            <h3 class="text-lg font-medium text-gray-700 mb-2">File Previews</h3>
                            <div id="file-list"></div>
                        </div>
                        <input type="hidden" id="merge-file-order" name="file_order">
                        <div>
                            <label for="merge-method" class="block text-sm font-medium text-gray-600 mb-1">Merge
                                Method</label>
                            <select id="merge-method" name="method"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                <option value="PyPDF2">PyPDF2 (Fast, up to 51 files)</option>
                                <option value="Ghostscript">Ghostscript (Slower, up to 30 files)</option>
                            </select>
                        </div>
                        <button type="button"
                            onclick="updateFileOrder(document.querySelectorAll('.file-preview')); processPDF('merge_pdf', 'mergeForm')"
                            class="w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                            <i class="fas fa-object-group mr-2"></i> Merge PDFs
                        </button>
                        <div class="progress" id="progress-mergeForm">
                            <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                            <div class="progress-text" id="progress-text-mergeForm"></div>
                        </div>
                        <p id="result-mergeForm" class="text-sm text-center"></p>
                    </form>
                </div>
            </div>

            <!-- Compress PDF -->
            <div id="compress-section" class="tool-section" style="display: none;">
                <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                    <div class="flex items-center mb-4">
                        <div class="bg-purple-100 p-2 rounded-full mr-3">
                            <i class="fas fa-compress-alt text-purple-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Compress PDF</h2>
                    </div>
                    <form id="compressForm" class="space-y-4">
                        <div>
                            <label for="compress-file" class="block text-sm font-medium text-gray-600 mb-1">Select PDF
                                File</label>
                            <div class="flex items-center">
                                <label
                                    class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                    <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose File
                                    <input type="file" id="compress-file" name="file" accept=".pdf" required
                                        class="hidden">
                                </label>
                                <span id="compress-file-name" class="ml-3 text-sm text-gray-500">No file selected</span>
                            </div>
                        </div>
                        <div>
                            <label for="compress-preset"
                                class="block text-sm font-medium text-gray-600 mb-1">Compression Level</label>
                            <select id="compress-preset" name="preset"
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="High">High Compression (Smallest Size)</option>
                                <option value="Medium">Medium Compression (Balanced)</option>
                                <option value="Low">Low Compression (Better Quality)</option>
                                <option value="Custom">Custom (High Quality)</option>
                            </select>
                        </div>
                        <button type="button" onclick="processPDF('compress_pdf', 'compressForm')"
                            class="w-full bg-purple-600 text-white p-3 rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                            <i class="fas fa-compress-alt mr-2"></i> Compress PDF
                        </button>
                        <div class="progress" id="progress-compressForm">
                            <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                            <div class="progress-text" id="progress-text-compressForm"></div>
                        </div>
                        <p id="result-compressForm" class="text-sm text-center"></p>
                    </form>
                </div>
            </div>

            <!-- Encrypt PDF -->
            <div id="encrypt-section" class="tool-section" style="display: none;">
                <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                    <div class="flex items-center mb-4">
                        <div class="bg-yellow-100 p-2 rounded-full mr-3">
                            <i class="fas fa-lock text-yellow-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Encrypt PDF</h2>
                    </div>
                    <form id="encryptForm" class="space-y-4">
                        <div>
                            <label for="encrypt-file" class="block text-sm font-medium text-gray-600 mb-1">Select PDF
                                File</label>
                            <div class="flex items-center">
                                <label
                                    class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                    <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose File
                                    <input type="file" id="encrypt-file" name="file" accept=".pdf" required
                                        class="hidden">
                                </label>
                                <span id="encrypt-file-name" class="ml-3 text-sm text-gray-500">No file selected</span>
                            </div>
                        </div>
                        <div>
                            <label for="encrypt-password"
                                class="block text-sm font-medium text-gray-600 mb-1">Password</label>
                            <input type="password" id="encrypt-password" name="password" placeholder="Enter password"
                                required
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent">
                        </div>
                        <button type="button" onclick="processPDF('encrypt_pdf', 'encryptForm')"
                            class="w-full bg-yellow-600 text-white p-3 rounded-lg hover:bg-yellow-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                            <i class="fas fa-lock mr-2"></i> Encrypt PDF
                        </button>
                        <div class="progress" id="progress-encryptForm">
                            <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                            <div class="progress-text" id="progress-text-encryptForm"></div>
                        </div>
                        <p id="result-encryptForm" class="text-sm text-center"></p>
                    </form>
                </div>
            </div>

            <!-- Convert PDF to Images -->
            <div id="pdfToImages-section" class="tool-section" style="display: none;">
                <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                    <div class="flex items-center mb-4">
                        <div class="bg-pink-100 p-2 rounded-full mr-3">
                            <i class="fas fa-file-image text-pink-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Convert PDF to Images</h2>
                    </div>
                    <form id="pdfToImagesForm" class="space-y-4">
                        <div>
                            <label for="pdfToImages-file" class="block text-sm font-medium text-gray-600 mb-1">Select
                                PDF File</label>
                            <div class="flex items-center">
                                <label
                                    class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                    <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose File
                                    <input type="file" id="pdfToImages-file" name="file" accept=".pdf" required
                                        class="hidden">
                                </label>
                                <span id="pdfToImages-file-name" class="ml-3 text-sm text-gray-500">No file
                                    selected</span>
                            </div>
                        </div>
                        <button type="button" onclick="processPDF('convert_pdf_to_images', 'pdfToImagesForm')"
                            class="w-full bg-pink-600 text-white p-3 rounded-lg hover:bg-pink-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                            <i class="fas fa-file-image mr-2"></i> Convert to Images
                        </button>
                        <div class="progress" id="progress-pdfToImagesForm">
                            <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                            <div class="progress-text" id="progress-text-pdfToImagesForm"></div>
                        </div>
                        <p id="result-pdfToImagesForm" class="text-sm text-center"></p>
                    </form>
                </div>
            </div>

            <!-- Split PDF -->
            <div id="split-section" class="tool-section" style="display: none;">
                <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                    <div class="flex items-center mb-4">
                        <div class="bg-indigo-100 p-2 rounded-full mr-3">
                            <i class="fas fa-cut text-indigo-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Split PDF</h2>
                    </div>
                    <form id="splitForm" class="space-y-4">
                        <div>
                            <label for="split-file" class="block text-sm font-medium text-gray-600 mb-1">Select PDF
                                File</label>
                            <div class="flex items-center">
                                <label
                                    class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                    <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose File
                                    <input type="file" id="split-file" name="file" accept=".pdf" required
                                        class="hidden">
                                </label>
                                <span id="split-file-name" class="ml-3 text-sm text-gray-500">No file selected</span>
                            </div>
                        </div>
                        <button type="button" onclick="processPDF('split_pdf', 'splitForm')"
                            class="w-full bg-indigo-600 text-white p-3 rounded-lg hover:bg-indigo-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                            <i class="fas fa-cut mr-2"></i> Split PDF
                        </button>
                        <div class="progress" id="progress-splitForm">
                            <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                            <div class="progress-text" id="progress-text-splitForm"></div>
                        </div>
                        <p id="result-splitForm" class="text-sm text-center"></p>
                    </form>
                </div>
            </div>

            <!-- Delete PDF Pages -->
            <div id="deletePages-section" class="tool-section" style="display: none;">
                <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                    <div class="flex items-center mb-4">
                        <div class="bg-red-100 p-2 rounded-full mr-3">
                            <i class="fas fa-trash-alt text-red-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Delete PDF Pages</h2>
                    </div>
                    <form id="deletePagesForm" class="space-y-4">
                        <div>
                            <label for="deletePages-file" class="block text-sm font-medium text-gray-600 mb-1">Select
                                PDF File</label>
                            <div class="flex items-center">
                                <label
                                    class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                    <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose File
                                    <input type="file" id="deletePages-file" name="file" accept=".pdf" required
                                        class="hidden">
                                </label>
                                <span id="deletePages-file-name" class="ml-3 text-sm text-gray-500">No file
                                    selected</span>
                            </div>
                        </div>
                        <div>
                            <label for="deletePages-pages" class="block text-sm font-medium text-gray-600 mb-1">Pages to
                                Delete (e.g., 2,5,7)</label>
                            <input type="text" id="deletePages-pages" name="pages"
                                placeholder="Pages to delete (e.g., 2,5,7)" required
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent">
                        </div>
                        <button type="button" onclick="processPDF('delete_pdf_pages', 'deletePagesForm')"
                            class="w-full bg-red-600 text-white p-3 rounded-lg hover:bg-red-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                            <i class="fas fa-trash-alt mr-2"></i> Delete Pages
                        </button>
                        <div class="progress" id="progress-deletePagesForm">
                            <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                            <div class="progress-text" id="progress-text-deletePagesForm"></div>
                        </div>
                        <p id="result-deletePagesForm" class="text-sm text-center"></p>
                    </form>
                </div>
            </div>



            <!-- Convert PDF to Word -->
            <div id="pdfToWord-section" class="tool-section" style="display: none;">
                <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                    <div class="flex items-center mb-4">
                        <div class="bg-blue-100 p-2 rounded-full mr-3">
                            <i class="fas fa-file-word text-blue-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Convert PDF to Word</h2>
                    </div>
                    <form id="pdfToWordForm" class="space-y-4">
                        <div>
                            <label for="pdfToWord-file" class="block text-sm font-medium text-gray-600 mb-1">Select PDF
                                File</label>
                            <div class="flex items-center">
                                <label
                                    class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                    <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose File
                                    <input type="file" id="pdfToWord-file" name="file" accept=".pdf" required
                                        class="hidden">
                                </label>
                                <span id="pdfToWord-file-name" class="ml-3 text-sm text-gray-500">No file
                                    selected</span>
                            </div>
                        </div>
                        <button type="button" onclick="processPDF('convert_pdf_to_word', 'pdfToWordForm')"
                            class="w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                            <i class="fas fa-file-word mr-2"></i> Convert to Word
                        </button>
                        <div class="progress" id="progress-pdfToWordForm">
                            <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                            <div class="progress-text" id="progress-text-pdfToWordForm"></div>
                        </div>
                        <p id="result-pdfToWordForm" class="text-sm text-center"></p>
                    </form>
                </div>
            </div>

            <!-- Convert PDF to Excel -->
            <div id="pdfToExcel-section" class="tool-section" style="display: none;">
                <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                    <div class="flex items-center mb-4">
                        <div class="bg-green-100 p-2 rounded-full mr-3">
                            <i class="fas fa-file-excel text-green-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Convert PDF to Excel</h2>
                    </div>
                    <form id="pdfToExcelForm" class="space-y-4">
                        <div>
                            <label for="pdfToExcel-file" class="block text-sm font-medium text-gray-600 mb-1">Select PDF
                                File</label>
                            <div class="flex items-center">
                                <label
                                    class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                    <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose File
                                    <input type="file" id="pdfToExcel-file" name="file" accept=".pdf" required
                                        class="hidden">
                                </label>
                                <span id="pdfToExcel-file-name" class="ml-3 text-sm text-gray-500">No file
                                    selected</span>
                            </div>
                        </div>
                        <button type="button" onclick="processPDF('convert_pdf_to_excel', 'pdfToExcelForm')"
                            class="w-full bg-green-600 text-white p-3 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                            <i class="fas fa-file-excel mr-2"></i> Convert to Excel
                        </button>
                        <div class="progress" id="progress-pdfToExcelForm">
                            <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                            <div class="progress-text" id="progress-text-pdfToExcelForm"></div>
                        </div>
                        <p id="result-pdfToExcelForm" class="text-sm text-center"></p>
                    </form>
                </div>
            </div>

            <!-- Image to PDF -->
            <div id="imageToPdf-section" class="tool-section" style="display: none;">
                <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                    <div class="flex items-center mb-4">
                        <div class="bg-teal-100 p-2 rounded-full mr-3">
                            <i class="fas fa-image text-teal-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Convert Image to PDF</h2>
                    </div>
                    <form id="imageToPdfForm" class="space-y-4">
                        <div>
                            <label for="imageToPdf-file" class="block text-sm font-medium text-gray-600 mb-1">Select
                                Image File</label>
                            <div class="flex items-center">
                                <label
                                    class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                    <i class="fas fa-image mr-2 text-teal-500"></i> Choose File
                                    <input type="file" id="imageToPdf-file" name="file" accept="image/png,image/jpeg"
                                        required class="hidden">
                                </label>
                                <span id="imageToPdf-file-name" class="ml-3 text-sm text-gray-500">No file
                                    selected</span>
                            </div>
                        </div>
                        <button type="button" onclick="processPDF('convert_image_to_pdf', 'imageToPdfForm')"
                            class="w-full bg-teal-600 text-white p-3 rounded-lg hover:bg-teal-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                            <i class="fas fa-image mr-2"></i> Convert to PDF
                        </button>
                        <div class="progress" id="progress-imageToPdfForm">
                            <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                            <div class="progress-text" id="progress-text-imageToPdfForm"></div>
                        </div>
                        <p id="result-imageToPdfForm" class="text-sm text-center"></p>
                    </form>
                </div>
            </div>

            <!-- Remove Password -->
            <div id="removePassword-section" class="tool-section" style="display: none;">
                <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                    <div class="flex items-center mb-4">
                        <div class="bg-orange-100 p-2 rounded-full mr-3">
                            <i class="fas fa-unlock text-orange-600 text-xl"></i>
                        </div>
                        <h2 class="text-2xl font-semibold text-gray-800">Remove PDF Password</h2>
                    </div>
                    <form id="removePasswordForm" class="space-y-4">
                        <div>
                            <label for="removePassword-file" class="block text-sm font-medium text-gray-600 mb-1">Select
                                PDF File</label>
                            <div class="flex items-center">
                                <label
                                    class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                    <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose File
                                    <input type="file" id="removePassword-file" name="file" accept=".pdf" required
                                        class="hidden">
                                </label>
                                <span id="removePassword-file-name" class="ml-3 text-sm text-gray-500">No file
                                    selected</span>
                            </div>
                        </div>
                        <div>
                            <label for="removePassword-password"
                                class="block text-sm font-medium text-gray-600 mb-1">Password</label>
                            <input type="password" id="removePassword-password" name="password"
                                placeholder="Enter password" required
                                class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent">
                        </div>
                        <button type="button" onclick="processPDF('remove_pdf_password', 'removePasswordForm')"
                            class="w-full bg-orange-600 text-white p-3 rounded-lg hover:bg-orange-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                            <i class="fas fa-unlock mr-2"></i> Remove Password
                        </button>
                        <div class="progress" id="progress-removePasswordForm">
                            <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                            <div class="progress-text" id="progress-text-removePasswordForm"></div>
                        </div>
                        <p id="result-removePasswordForm" class="text-sm text-center"></p>
                    </form>
                </div>
            </div>

            <!-- Reorder Pages -->

            <div class="grid grid-cols-1 gap-8">
                <!-- Other tool sections remain unchanged -->
                <div id="reorder-section" class="tool-section" style="display: none;">
                    <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-blue-100 p-2 rounded-full mr-3">
                                <i class="fas fa-sort-numeric-up text-blue-600 text-xl"></i>
                            </div>
                            <h2 class="text-2xl font-semibold text-gray-800">Reorder PDF Pages</h2>
                        </div>
                        <form id="reorderForm" class="space-y-4">
                            <div>
                                <label for="reorder-file" class="block text-sm font-medium text-gray-600 mb-1">Select
                                    PDF File</label>
                                <div class="flex items-center">
                                    <label
                                        class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                        <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose File
                                        <input type="file" id="reorder-file" name="file" accept=".pdf" required
                                            class="hidden">
                                    </label>
                                    <span id="reorder-file-name" class="ml-3 text-sm text-gray-500">No file
                                        selected</span>
                                </div>
                            </div>
                            <div id="page-previews" class="hidden">
                                <h3 class="text-lg font-medium text-gray-700 mb-2">Page Previews</h3>
                                <div id="page-list"></div>
                            </div>
                            <input type="hidden" id="reorder-page-order" name="page_order">
                            <button type="button"
                                onclick="updatePageOrder(document.querySelectorAll('.page-preview')); processPDF('reorder_pages', 'reorderForm')"
                                class="w-full bg-blue-600 text-white p-3 rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                                <i class="fas fa-sort-numeric-up mr-2"></i> Reorder and Download
                            </button>
                            <div class="progress" id="progress-reorderForm">
                                <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                                <div class="progress-text" id="progress-text-reorderForm"></div>
                            </div>
                            <p id="result-reorderForm" class="text-sm text-center"></p>
                        </form>
                    </div>
                </div>

                <!-- Add Page Numbers -->
                <div id="pageNumbers-section" class="tool-section" style="display: none;">
                    <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-green-100 p-2 rounded-full mr-3">
                                <i class="fas fa-list-ol text-green-600 text-xl"></i>
                            </div>
                            <h2 class="text-2xl font-semibold text-gray-800">Add Page Numbers</h2>
                        </div>
                        <form id="pageNumbersForm" class="space-y-4">
                            <div>
                                <label for="pageNumbers-file"
                                    class="block text-sm font-medium text-gray-600 mb-1">Select PDF File</label>
                                <div class="flex items-center">
                                    <label
                                        class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                        <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose File
                                        <input type="file" id="pageNumbers-file" name="file" accept=".pdf" required
                                            class="hidden">
                                    </label>
                                    <span id="pageNumbers-file-name" class="ml-3 text-sm text-gray-500">No file
                                        selected</span>
                                </div>
                            </div>
                            <div>
                                <label for="pageNumbers-position"
                                    class="block text-sm font-medium text-gray-600 mb-1">Position</label>
                                <select id="pageNumbers-position" name="position"
                                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    <option value="top">Top</option>
                                    <option value="bottom">Bottom</option>
                                </select>
                            </div>
                            <div>
                                <label for="pageNumbers-alignment"
                                    class="block text-sm font-medium text-gray-600 mb-1">Alignment</label>
                                <select id="pageNumbers-alignment" name="alignment"
                                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    <option value="left">Left</option>
                                    <option value="center">Center</option>
                                    <option value="right">Right</option>
                                </select>
                            </div>
                            <div>
                                <label for="pageNumbers-format"
                                    class="block text-sm font-medium text-gray-600 mb-1">Numbering Format</label>
                                <select id="pageNumbers-format" name="format"
                                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent">
                                    <option value="page_x">Page 1, Page 2, ...</option>
                                    <option value="x">1, 2, 3, ...</option>
                                </select>
                            </div>
                            <button type="button" onclick="processPDF('add_page_numbers', 'pageNumbersForm')"
                                class="w-full bg-green-600 text-white p-3 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                                <i class="fas fa-list-ol mr-2"></i> Add Page Numbers
                            </button>
                            <div class="progress" id="progress-pageNumbersForm">
                                <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                                <div class="progress-text" id="progress-text-pageNumbersForm"></div>
                            </div>
                            <p id="result-pageNumbersForm" class="text-sm text-center"></p>
                        </form>
                    </div>
                </div>
                <!-- Add Signature -->






                <!-- Add Signature -->
                <div id="signature-section" class="tool-section" style="display: none;">
                    <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-purple-100 p-2 rounded-full mr-3">
                                <i class="fas fa-signature text-purple-600 text-xl"></i>
                            </div>
                            <h2 class="text-2xl font-semibold text-gray-800">Add Signature</h2>
                        </div>
                        <form id="signatureForm" class="space-y-4">
                            <div>
                                <label for="signature-pdf-file"
                                    class="block text-sm font-medium text-gray-600 mb-1">Select PDF File</label>
                                <div class="flex items-center">
                                    <label
                                        class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                        <i class="fas fa-file-pdf mr-2 text-red-500"></i> Choose PDF
                                        <input type="file" id="signature-pdf-file" name="pdf_file" accept=".pdf"
                                            required class="hidden">
                                    </label>
                                    <span id="signature-pdf-file-name" class="ml-3 text-sm text-gray-500">No file
                                        selected</span>
                                </div>
                            </div>
                            <div>
                                <label for="signature-image-file"
                                    class="block text-sm font-medium text-gray-600 mb-1">Select Signature Image</label>
                                <div class="flex items-center">
                                    <label
                                        class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                        <i class="fas fa-image mr-2 text-purple-500"></i> Choose Image
                                        <input type="file" id="signature-image-file" name="signature_file"
                                            accept=".png,.jpg,.jpeg" required class="hidden">

                                    </label>

                                    <span id="signature-image-file-name" class="ml-3 text-sm text-gray-500">No file
                                        selected</span>
                                </div>

                                <div class="flex items-center mt-4">
                                    <input type="hidden" name="remove_bg" value="false">
                                    <input type="checkbox" id="remove-bg" name="remove_bg" value="true" class="mr-2">
                                    <label for="remove-bg" class="text-sm font-medium text-gray-600">Remove Image
                                        Background</label>
                                </div>
                            </div>
                            <div id="signature-page-previews" class="hidden">
                                <div class="flex items-center mb-2">
                                    <input type="checkbox" id="select-all-pages" class="mr-2">
                                    <label for="select-all-pages" class="text-sm font-medium text-gray-600">Select All
                                        Pages</label>
                                </div>
                                <h3 class="text-lg font-medium text-gray-700 mb-2">Page Previews</h3>
                                <div id="signature-page-list"
                                    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4"></div>
                            </div>
                            <input type="hidden" id="signature-selected-pages" name="specific_pages">
                            <div>
                                <label for="signature-size"
                                    class="block text-sm font-medium text-gray-600 mb-1">Size</label>
                                <select id="signature-size" name="size"
                                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="small">Small</option>
                                    <option value="medium">Medium</option>
                                    <option value="large">Large</option>
                                </select>
                            </div>
                            <div>
                                <label for="signature-position"
                                    class="block text-sm font-medium text-gray-600 mb-1">Position</label>
                                <select id="signature-position" name="position"
                                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="top">Top</option>
                                    <option value="center">Center</option>
                                    <option value="bottom">Bottom</option>
                                </select>
                            </div>
                            <div>
                                <label for="signature-alignment"
                                    class="block text-sm font-medium text-gray-600 mb-1">Alignment</label>
                                <select id="signature-alignment" name="alignment"
                                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                    <option value="left">Left</option>
                                    <option value="center">Center</option>
                                    <option value="right">Right</option>
                                </select>
                            </div>
                            <button type="button" onclick="processPDF('add_signature', 'signatureForm')"
                                class="w-full bg-purple-600 text-white p-3 rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                                <i class="fas fa-signature mr-2"></i> Add Signature
                            </button>
                            <div class="progress" id="progress-signatureForm">
                                <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                                <div class="progress-text" id="progress-text-signatureForm"></div>
                            </div>
                            <p id="result-signatureForm" class="text-sm text-center"></p>
                        </form>
                    </div>
                </div>


                <!-- Remove Background -->
                <div id="removeBackground-section" class="tool-section" style="display: none;">
                    <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-cyan-100 p-2 rounded-full mr-3">
                                <i class="fas fa-eraser text-cyan-600 text-xl"></i>
                            </div>
                            <h2 class="text-2xl font-semibold text-gray-800">Remove Image Background</h2>
                        </div>
                        <form id="removeBackgroundForm" class="space-y-4">
                            <div>
                                <label for="removeBackground-file"
                                    class="block text-sm font-medium text-gray-600 mb-1">Select Image File</label>
                                <div class="flex items-center">
                                    <label
                                        class="cursor-pointer bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg border border-gray-300 transition-colors">
                                        <i class="fas fa-image mr-2 text-cyan-500"></i> Choose Image
                                        <input type="file" id="removeBackground-file" name="file"
                                            accept="image/png,image/jpeg" required class="hidden">
                                    </label>
                                    <span id="removeBackground-file-name" class="ml-3 text-sm text-gray-500">No file
                                        selected</span>
                                </div>
                            </div>
                            <button type="button" onclick="processImage('remove_background', 'removeBackgroundForm')"
                                class="w-full bg-cyan-600 text-white p-3 rounded-lg hover:bg-cyan-700 transition-colors disabled:bg-gray-400 flex items-center justify-center">
                                <i class="fas fa-eraser mr-2"></i> Remove Background
                            </button>
                            <div class="progress" id="progress-removeBackgroundForm">
                                <progress value="0" max="100" class="w-full h-2 rounded-full"></progress>
                                <div class="progress-text" id="progress-text-removeBackgroundForm"></div>
                            </div>
                            <p id="result-removeBackgroundForm" class="text-sm text-center"></p>
                        </form>
                    </div>
                </div>




                <!-- Amazing Fact Videos -->
                <div id="videos-section" class="tool-section" style="display: none;">
                    <div class="bg-white p-6 rounded-xl shadow-md tool-card">
                        <div class="flex items-center mb-4">
                            <div class="bg-teal-100 p-2 rounded-full mr-3">
                                <i class="fas fa-video text-teal-600 text-xl"></i>
                            </div>
                            <h2 class="text-2xl font-semibold text-gray-800">Amazing Fact Videos</h2>
                        </div>
                        <button onclick="window.location.href='/static/videos.html'"
                            class="w-full bg-teal-600 text-white p-3 rounded-lg hover:bg-teal-700 transition-colors flex items-center justify-center">
                            <i class="fas fa-video mr-2"></i> Click to See Amazing Fact Videos
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="bg-gray-800 text-white py-6">
            <div class="container mx-auto px-4 text-center">
                <p>Â© 2025 Vishnu Tools. All rights reserved.</p>
                <p class="mt-2 text-sm">Built with <i class="fas fa-heart text-red-500"></i> for efficient PDF
                    processing
                    and AI assistance</p>
            </div>
        </footer>

        <!-- Additional JavaScript for Mobile Menu and File Input Handling -->
        <script>
            // Mobile menu toggle
            function toggleMobileMenu() {
                const mobileMenu = document.getElementById('mobile-menu');
                const menuButton = document.getElementById('mobile-menu-button');
                mobileMenu.classList.toggle('hidden');
                menuButton.querySelector('i').classList.toggle('fa-bars');
                menuButton.querySelector('i').classList.toggle('fa-times');
            }

            function toggleMobileSubmenu() {
                const mobileSubmenu = document.getElementById('mobile-submenu');
                mobileSubmenu.classList.toggle('hidden');
            }

            document.getElementById('mobile-menu-button').addEventListener('click', toggleMobileMenu);
            // 
            function updatePageOrder(pages) {
                const pageOrder = Array.from(pages).map(page => page.dataset.pageNum);
                document.getElementById('reorder-page-order').value = pageOrder.join(',');
            }

            function updateButtonStates(pages) {
                pages.forEach((page, index) => {
                    const upButton = page.querySelector('.move-up');
                    const downButton = page.querySelector('.move-down');

                    upButton.disabled = index === 0;
                    downButton.disabled = index === pages.length - 1;
                });
            }
            // Update file input labels with selected file names
            function updateFileLabel(inputId, labelId) {
                const input = document.getElementById(inputId);
                const label = document.getElementById(labelId);
                input.addEventListener('change', () => {
                    if (input.files.length > 1) {
                        label.textContent = `${input.files.length} files selected`;
                    } else if (input.files.length === 1) {
                        label.textContent = input.files[0].name;
                    } else {
                        label.textContent = 'No file selected';
                    }
                });
            }

            // Initialize file input listeners
            updateFileLabel('merge-files', 'merge-files-count');
            updateFileLabel('compress-file', 'compress-file-name');
            updateFileLabel('encrypt-file', 'encrypt-file-name');
            updateFileLabel('pdfToImages-file', 'pdfToImages-file-name');
            updateFileLabel('split-file', 'split-file-name');
            updateFileLabel('deletePages-file', 'deletePages-file-name');
            updateFileLabel('pdfToWord-file', 'pdfToWord-file-name');
            updateFileLabel('pdfToExcel-file', 'pdfToExcel-file-name');
            updateFileLabel('imageToPdf-file', 'imageToPdf-file-name');
            updateFileLabel('removePassword-file', 'removePassword-file-name');
            updateFileLabel('reorder-file', 'reorder-file-name');
            updateFileLabel('pageNumbers-file', 'pageNumbers-file-name');
            updateFileLabel('signature-pdf-file', 'signature-pdf-file-name');
            updateFileLabel('signature-image-file', 'signature-image-file-name');

            // Show chat section by default
            document.getElementById('chat-section').style.display = 'block';

            // Memory Monitoring Code
            document.addEventListener('DOMContentLoaded', function () {
                const ramBar = document.getElementById('ram-bar');
                const ramStats = document.getElementById('ram-stats');
                const romBar = document.getElementById('rom-bar');
                const romStats = document.getElementById('rom-stats');

                function formatBytes(bytes) {
                    if (bytes === 0) return '0 Bytes';
                    const k = 1024;
                    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
                    const i = Math.floor(Math.log(bytes) / Math.log(k));
                    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
                }

                function updateMemoryUI(data) {
                    // Update RAM
                    const ramPercent = data.ram.percent;
                    if (ramBar) {
                        ramBar.style.width = `${ramPercent}%`;
                        ramBar.style.backgroundColor = ramPercent > 80 ? '#f44336' : '#4CAF50';
                    }
                    if (ramStats) {
                        ramStats.innerHTML = `
                                    <div>Used: ${formatBytes(data.ram.used)} / ${formatBytes(data.ram.total)}</div>
                                    <div>Free: ${formatBytes(data.ram.free)}</div>
                                    <div>Usage: ${ramPercent.toFixed(1)}%</div>
                                `;
                    }

                    // Update ROM (Swap)
                    const romPercent = data.rom.percent;
                    if (romBar) {
                        romBar.style.width = `${romPercent}%`;
                        romBar.style.backgroundColor = romPercent > 80 ? '#f44336' : '#4CAF50';
                    }
                    if (romStats) {
                        romStats.innerHTML = `
                                    <div>Used: ${formatBytes(data.rom.used)} / ${formatBytes(data.rom.total)}</div>
                                    <div>Free: ${formatBytes(data.rom.free)}</div>
                                    <div>Usage: ${romPercent.toFixed(1)}%</div>
                                `;
                    }
                }

                // Connect to SSE endpoint
                const eventSource = new EventSource(`${BASE_URL}/memory-usage`);

                eventSource.onmessage = (event) => {
                    const data = JSON.parse(event.data);
                    updateMemoryUI(data);
                };

                eventSource.onerror = () => {
                    console.error('EventSource failed');
                    // Attempt to reconnect after 2 seconds
                    setTimeout(() => {
                        eventSource.close();
                        new EventSource('/memory-usage');
                    }, 2000);
                };
            });


            document.getElementById('reorder-file').addEventListener('change', async (e) => {
                const file = e.target.files[0];
                const resultDiv = document.getElementById('result-reorderForm');
                const pagePreviews = document.getElementById('page-previews');
                const pageList = document.getElementById('page-list');

                if (!file) {
                    pagePreviews.classList.add('hidden');
                    resultDiv.textContent = 'No file selected.';
                    resultDiv.classList.add('text-red-600');
                    return;
                }

                console.log('Processing PDF file:', file.name, file.size, file.type);

                try {
                    const arrayBuffer = await file.arrayBuffer();
                    console.log('ArrayBuffer loaded, size:', arrayBuffer.byteLength);

                    const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                    console.log('PDF loaded, pages:', pdf.numPages);

                    const numPages = pdf.numPages;
                    if (numPages === 0) {
                        throw new Error('PDF has no pages.');
                    }

                    pageList.innerHTML = '';
                    const pages = [];

                    for (let i = 1; i <= numPages; i++) {
                        console.log('Rendering page:', i);
                        const page = await pdf.getPage(i);
                        const viewport = page.getViewport({ scale: 0.5 });
                        const canvas = document.createElement('canvas');
                        canvas.width = viewport.width;
                        canvas.height = viewport.height;
                        const context = canvas.getContext('2d');
                        await page.render({ canvasContext: context, viewport }).promise;

                        const pageDiv = document.createElement('div');
                        pageDiv.className = 'page-preview';
                        pageDiv.dataset.pageNum = i;
                        pageDiv.innerHTML = `
                        <div class="page-controls">
                            <button type="button" class="move-up"><i class="fas fa-arrow-up"></i></button>
                            <button type="button" class="move-down"><i class="fas fa-arrow-down"></i></button>
                        </div>
                        <span class="text-gray-600">Page ${i}</span>
                    `;
                        pageDiv.insertBefore(canvas, pageDiv.firstChild);
                        pageList.appendChild(pageDiv);
                        pages.push(pageDiv);

                        // Update button states
                        pageDiv.querySelector('.move-up').disabled = i === 1;
                        pageDiv.querySelector('.move-down').disabled = i === numPages;

                        // Add event listeners for reordering
                        pageDiv.querySelector('.move-up').addEventListener('click', () => {
                            const prev = pageDiv.previousSibling;
                            if (prev) {
                                pageList.insertBefore(pageDiv, prev);
                                updatePageOrder(pages);
                                updateButtonStates(pages);
                                console.log('Moved page up, new order:', document.getElementById('reorder-page-order').value);
                            }
                        });
                        pageDiv.querySelector('.move-down').addEventListener('click', () => {
                            const next = pageDiv.nextSibling;
                            if (next) {
                                pageList.insertBefore(next, pageDiv);
                                updatePageOrder(pages);
                                updateButtonStates(pages);
                                console.log('Moved page down, new order:', document.getElementById('reorder-page-order').value);
                            }
                        });
                    }

                    pagePreviews.classList.remove('hidden');
                    updatePageOrder(pages);
                    console.log('Initial page order set:', document.getElementById('reorder-page-order').value);
                    resultDiv.textContent = `${numPages} pages loaded. Reorder using arrows and click Download.`;
                    resultDiv.classList.remove('text-red-600');
                    resultDiv.classList.add('text-green-600');
                } catch (err) {
                    console.error('Error processing PDF:', err);
                    resultDiv.textContent = `Error loading PDF: ${err.message}`;
                    resultDiv.classList.add('text-red-600');
                    pagePreviews.classList.add('hidden');
                    document.getElementById('reorder-page-order').value = '';
                }
            });



            document.getElementById('merge-files').addEventListener('change', async (e) => {
                const files = e.target.files;
                const resultDiv = document.getElementById('result-mergeForm');
                const filePreviews = document.getElementById('file-previews');
                const fileList = document.getElementById('file-list');

                if (files.length < 2) {
                    filePreviews.classList.add('hidden');
                    resultDiv.textContent = 'Please select at least 2 PDF files.';
                    resultDiv.classList.add('text-red-600');
                    return;
                }

                fileList.innerHTML = '';
                const fileDivs = [];

                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    console.log('Processing file:', file.name, file.size, file.type);

                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'file-preview';
                    fileDiv.dataset.fileIndex = i;
                    fileDiv.innerHTML = `
                    <div class="file-controls">
                        <button type="button" class="move-up"><i class="fas fa-arrow-up"></i></button>
                        <button type="button" class="move-down"><i class="fas fa-arrow-down"></i></button>
                    </div>
                    <span class="text-gray-600">${file.name}</span>
                `;
                    fileList.appendChild(fileDiv);
                    fileDivs.push(fileDiv);

                    fileDiv.querySelector('.move-up').disabled = i === 0;
                    fileDiv.querySelector('.move-down').disabled = i === files.length - 1;

                    fileDiv.querySelector('.move-up').addEventListener('click', () => {
                        const prev = fileDiv.previousSibling;
                        if (prev) {
                            fileList.insertBefore(fileDiv, prev);
                            updateFileOrder(fileDivs);
                            updateFileButtonStates(fileDivs);
                            console.log('Moved file up, new order:', document.getElementById('merge-file-order').value);
                        }
                    });
                    fileDiv.querySelector('.move-down').addEventListener('click', () => {
                        const next = fileDiv.nextSibling;
                        if (next) {
                            fileList.insertBefore(next, fileDiv);
                            updateFileOrder(fileDivs);
                            updateFileButtonStates(fileDivs);
                            console.log('Moved file down, new order:', document.getElementById('merge-file-order').value);
                        }
                    });
                }

                filePreviews.classList.remove('hidden');
                updateFileOrder(fileDivs);
                console.log('Initial file order set:', document.getElementById('merge-file-order').value);
                resultDiv.textContent = `${files.length} files loaded. Reorder using arrows and click Merge PDFs.`;
                resultDiv.classList.remove('text-red-600');
                resultDiv.classList.add('text-green-600');
            });


            updateFileLabel('signature-pdf-file', 'signature-pdf-file-name');
            updateFileLabel('signature-image-file', 'signature-image-file-name');

            // Function to update selected pages in the hidden input
            function updateSelectedPages() {
                const checkboxes = document.querySelectorAll('#signature-page-list input[type="checkbox"]');
                const selectedPages = Array.from(checkboxes)
                    .filter(cb => cb.checked)
                    .map(cb => cb.dataset.pageNum);
                document.getElementById('signature-selected-pages').value = selectedPages.join(',');
                console.log('Selected pages:', document.getElementById('signature-selected-pages').value);
            }

            // Handle PDF file selection for signature section
            document.getElementById('signature-pdf-file').addEventListener('change', async (e) => {
                const file = e.target.files[0];
                const resultDiv = document.getElementById('result-signatureForm');
                const pagePreviews = document.getElementById('signature-page-previews');
                const pageList = document.getElementById('signature-page-list');
                const selectAllCheckbox = document.getElementById('select-all-pages');
                const removeBgCheckbox = document.getElementById('remove-bg');
                console.log("Remove Background Checkbox is checked:", removeBgCheckbox);

                if (!file) {
                    pagePreviews.classList.add('hidden');
                    resultDiv.textContent = 'No file selected.';
                    resultDiv.classList.add('text-red-600');
                    return;
                }

                console.log('Processing PDF file:', file.name, file.size, file.type);

                try {
                    const arrayBuffer = await file.arrayBuffer();
                    console.log('ArrayBuffer loaded, size:', arrayBuffer.byteLength);

                    const pdf = await pdfjsLib.getDocument({ data: arrayBuffer }).promise;
                    console.log('PDF loaded, pages:', pdf.numPages);

                    const numPages = pdf.numPages;
                    if (numPages === 0) {
                        throw new Error('PDF has no pages.');
                    }

                    pageList.innerHTML = '';
                    const pages = [];

                    for (let i = 1; i <= numPages; i++) {
                        console.log('Rendering page:', i);
                        const page = await pdf.getPage(i);
                        const viewport = page.getViewport({ scale: 0.5 });
                        const canvas = document.createElement('canvas');
                        canvas.width = viewport.width;
                        canvas.height = viewport.height;
                        const context = canvas.getContext('2d');
                        await page.render({ canvasContext: context, viewport }).promise;

                        const pageDiv = document.createElement('div');
                        pageDiv.className = 'page-preview';
                        pageDiv.dataset.pageNum = i;
                        pageDiv.innerHTML = `
                            <div class="page-controls">
                                <input type="checkbox" class="page-checkbox" data-page-num="${i}">
                            </div>
                            <span class="text-gray-600">Page ${i}</span>
                        `;
                        pageDiv.insertBefore(canvas, pageDiv.firstChild);
                        pageList.appendChild(pageDiv);
                        pages.push(pageDiv);

                        // Add event listener for checkbox
                        pageDiv.querySelector('.page-checkbox').addEventListener('change', () => {
                            updateSelectedPages();
                            const allChecked = Array.from(document.querySelectorAll('.page-checkbox')).every(cb => cb.checked);
                            selectAllCheckbox.checked = allChecked;
                        });
                    }

                    // Handle select all checkbox
                    selectAllCheckbox.addEventListener('change', (e) => {
                        const checkboxes = document.querySelectorAll('.page-checkbox');
                        checkboxes.forEach(cb => cb.checked = e.target.checked);
                        updateSelectedPages();
                    });

                    pagePreviews.classList.remove('hidden');
                    updateSelectedPages();
                    resultDiv.textContent = `${numPages} pages loaded. Select pages to sign and click Add Signature.`;
                    resultDiv.classList.remove('text-red-600');
                    resultDiv.classList.add('text-green-600');
                } catch (err) {
                    console.error('Error processing PDF:', err);
                    resultDiv.textContent = `Error loading PDF: ${err.message}. Please ensure the file is a valid PDF and try again.`;
                    resultDiv.classList.add('text-red-600');
                    pagePreviews.classList.add('hidden');
                    document.getElementById('signature-selected-pages').value = '';
                }
            });

        </script>
</body>

</html>